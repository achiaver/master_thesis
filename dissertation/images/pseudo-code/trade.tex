\begin{tikzpicture}

    % Specification of nodes
    \node (start) [terminal]                    {Activity starts.};
    
    \node (d1)    [decision, below=of start]    {Were all the required inputs provided?};
    \node (d2)    [decision, below=of d1]       {Does the first address provided belong to the invoker?};
    \node (d3)    [decision, below=of d2]       {Is the exchange address a valid one?};
    \node (d4)    [decision, below=of d3]       {Is the exchange address also a member?};
    \node (d5)    [decision, below=of d4]       {Do both addresses belong to the same power utility?};
    \node (d6)    [decision, below=of d5]       {Are there provided factual values for trade?};
    
    \node (e1)    [i-o, right=of d3]            {Displays an error message.};
    
    \node (o1)    [onchain, below=of d6]        {Gets the inputs provided.};
    \node (o2)    [onchain, right=of o1]        {Gets the assets (quota and tokens) from each address.};
    
    \node (d7)    [decision, right=of o2]       {Do both addresses have enough assets to be exchanged?};
    
    \node (e2)    [i-o, above=of d7]            {Returns \verb|"false"|.};
    
    \node (o3)    [onchain, right=of d7]        {Decreases the quota from the first address by the exchange portion.};
    \node (o4)    [onchain, right=of o3]        {Increases the quota of the second address with the exchange portion.};
    \node (o5)    [onchain, above=of o4]        {Decreases the tokens from the second address by the price defined.};
    \node (o6)    [onchain, above=of o5]        {Increases the tokens of the first address with the price defined.};
    
    \node (e3)    [i2o, above=of o6]            {Displays information about the trade that has been made.};
    \node (e4)    [i-o, above=of e3]            {Returns \verb|"true"|.};
    
    \node (end)   [terminal, above=of e4]       {Activity ends.};


    % Specification of lines between nodes defined above with additional nodes for description.
    \draw[->]  (start) -- (d1);
    \draw[->]     (o1) -- (o2);
    \draw[->]     (o2) -- (d7);
    \draw[->]     (o3) -- (o4);
    \draw[->]     (o4) -- (o5);
    \draw[->]     (o5) -- (o6);
    \draw[->]     (o6) -- (e3);
    \draw[->]     (e3) -- (e4);
    \draw[->]     (e1) -| (end);
    \draw[->]     (e2) |- (end);
    \draw[->]     (e4) -- (end);

    \draw[->]     (d1) -- node[left=2.5mm]  {Yes} (d2);
    \draw[->]     (d2) -- node[left=2.5mm]  {Yes} (d3);
    \draw[->]     (d3) -- node[left=2.5mm]  {Yes} (d4);
    \draw[->]     (d4) -- node[left=2.5mm]  {Yes} (d5);
    \draw[->]     (d5) -- node[left=2.5mm]  {Yes} (d6);
    \draw[->]     (d6) -- node[left=2.5mm]  {Yes} (o1);
    \draw[->]     (d7) -- node[above=2.5mm] {Yes} (o3);
    
    \draw[->]     (d3) -- node[above=2.5mm] {No}  (e1);
    \draw[->]     (d7) -- node[left=2.5mm]  {No}  (e2);
    
    \draw[->]     (d1) -| node[pos=0.25, above=2.5mm] {No}  (e1);
    \draw[->]     (d2) -| node[pos=0.25, above=2.5mm] {No}  (e1);
    \draw[->]     (d4) -| node[pos=0.25, above=2.5mm] {No}  (e1);
    \draw[->]     (d5) -| node[pos=0.25, above=2.5mm] {No}  (e1);
    \draw[->]     (d6) -| node[pos=0.25, above=2.5mm] {No}  (e1);
    
\end{tikzpicture}